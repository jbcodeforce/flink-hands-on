# Optional: Use this file to create a Flink API key with Terraform
# This ensures the API key is properly owned by the service account
# and scoped to the Flink region.
#
# To use:
# 1. Copy this file to create-flink-api-key.tf
# 2. Uncomment the resources
# 3. Update the flink_statement resource to use the created API key
# 4. Remove flink_api_key and flink_api_secret from terraform.tfvars

# Get Flink region data
# data "confluent_flink_region" "main" {
#   cloud  = var.cloud_provider
#   region = var.cloud_region
# }

# Create Flink API key owned by the service account
# resource "confluent_api_key" "flink_api_key" {
#   display_name = "${var.display_name}-flink-api-key"
#   description  = "Flink API Key for ${var.display_name} UDF deployment"
#   
#   owner {
#     id          = var.flink_principal_id
#     api_version = "iam/v2"
#     kind        = "ServiceAccount"
#   }
#
#   managed_resource {
#     id          = data.confluent_flink_region.main.id
#     api_version = "fcpm/v2"
#     kind        = "Region"
#     
#     environment {
#       id = var.environment_id
#     }
#   }
# }

# Then update the flink_statement resource to use:
# credentials {
#   key    = confluent_api_key.flink_api_key.id
#   secret = confluent_api_key.flink_api_key.secret
# }
